<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PokemonTeamBuilder.TeamsPage"
             Title="My Teams">

    <Grid>
        <!-- Teams List View -->
        <Grid x:Name="teamsListView" RowDefinitions="Auto,*" Padding="16">
            <VerticalStackLayout Grid.Row="0" Spacing="8" Margin="0,10,0,20">
                <Label Text="My Teams"
                       FontSize="28"
                       FontAttributes="Bold"
                       HorizontalOptions="Start" />
                <Label Text="Build and manage your PokÃ©mon teams"
                       FontSize="14"
                       TextColor="{DynamicResource SubTextColor}"
                       HorizontalOptions="Start" />
            </VerticalStackLayout>

            <ScrollView Grid.Row="1">
                <Grid x:Name="teamGrid"
                      ColumnSpacing="16"
                      RowSpacing="16"
                      ColumnDefinitions="{OnIdiom Phone='*', Default='*,*,*'}"
                      RowDefinitions="Auto, Auto, Auto, Auto">
                </Grid>
            </ScrollView>

            <!-- Empty Teams Message -->
            <VerticalStackLayout x:Name="emptyTeamsMessage"
                                 Grid.Row="1"
                                 IsVisible="False"
                                 VerticalOptions="Center"
                                 HorizontalOptions="Center"
                                 Spacing="20">
                <Label Text="No Teams Created"
                       FontSize="24"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />
                <Label Text="Create your first PokÃ©mon team to get started!"
                       FontSize="14"
                       TextColor="{DynamicResource SubTextColor}"
                       HorizontalOptions="Center" />
                <Button Text="+"
                        FontSize="36"
                        WidthRequest="80"
                        HeightRequest="80"
                        CornerRadius="40"
                        BackgroundColor="{DynamicResource PrimaryColor}"
                        TextColor="White"
                        HorizontalOptions="Center"
                        Margin="0,10,0,0"
                        Clicked="OnAddTeamClicked" />
                <Label Text="Create Team"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="{DynamicResource PrimaryColor}"
                       HorizontalOptions="Center" />
            </VerticalStackLayout>

            <Button x:Name="floatingAddButton"
                    Grid.Row="1"
                    Text="+"
                    FontSize="28"
                    WidthRequest="64"
                    HeightRequest="64"
                    CornerRadius="32"
                    BackgroundColor="{DynamicResource PrimaryColor}"
                    TextColor="White"
                    HorizontalOptions="End"
                    VerticalOptions="End"
                    Margin="0,0,8,16"
                    Clicked="OnAddTeamClicked" />
        </Grid>

        <!-- Team Detail View -->
        <Grid x:Name="teamDetailView"
              IsVisible="False"
              BackgroundColor="{DynamicResource PageBackgroundColor}"
              RowSpacing="16"
              ColumnSpacing="20"
              Padding="20">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="{OnIdiom Phone=*, Default=1.2*}" />
                <ColumnDefinition Width="{OnIdiom Phone=0, Default=*}" />
            </Grid.ColumnDefinitions>

            <Grid Grid.Row="0" Grid.ColumnSpan="{OnIdiom Phone=1, Default=2}" ColumnDefinitions="Auto,*,Auto" Margin="0,0,0,10">
                <Button Grid.Column="0" Text="â† Back" BackgroundColor="{DynamicResource SecondaryColor}" Clicked="OnBackToTeamsClicked" HorizontalOptions="Start" />
                <Label Grid.Column="1" x:Name="teamNameLabel" Text="Team Name" FontSize="24" FontAttributes="Bold" HorizontalOptions="Center" VerticalOptions="Center" />
                <Button Grid.Column="2" Text="+ Add PokÃ©mon" BackgroundColor="{DynamicResource AccentColor}" Clicked="OnAddPokemonToTeamClicked" HorizontalOptions="End" />
            </Grid>

            <ScrollView Grid.Row="1" Grid.Column="0">
                <VerticalStackLayout x:Name="teamMembersContainer" Spacing="12" Padding="0,0,0,20">
                </VerticalStackLayout>
            </ScrollView>

            <Frame x:Name="desktopSummaryFrame"
                   Grid.Row="1" 
                   Grid.Column="1" 
                   IsVisible="{OnIdiom Phone=False, Default=True}"
                   Padding="20" 
                   CornerRadius="16"
                   BackgroundColor="{DynamicResource CardBackgroundColor}"
                   BorderColor="{DynamicResource BorderColor}"
                   HasShadow="False"
                   VerticalOptions="Fill">

                <VerticalStackLayout x:Name="teamSummaryPanel" Spacing="16">
                    <Label Text="ðŸ“Š Team Analysis" FontSize="22" FontAttributes="Bold"/>
                    <BoxView HeightRequest="1" Color="{DynamicResource DividerColor}" />

                    <VerticalStackLayout Spacing="12">
                        <Label x:Name="totalScoreLabel" Text="Total Score: N/A" FontSize="16" FontAttributes="Bold"/>

                        <Label Text="Strengths" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource SuccessColor}" Margin="0,8,0,0"/>
                        <Label x:Name="teamStrengthsLabel" Text="N/A" FontSize="13"/>

                        <Label Text="Weaknesses" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource ErrorColor}" Margin="0,8,0,0"/>
                        <Label x:Name="teamWeaknessesLabel" Text="N/A" FontSize="13"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <VerticalStackLayout Grid.Row="1" Grid.Column="0" x:Name="emptyTeamMessage" IsVisible="False" VerticalOptions="Center" HorizontalOptions="Center" Spacing="12">
                <Label Text="ðŸŽ®" FontSize="48" HorizontalOptions="Center" />
                <Label Text="No PokÃ©mon yet!" FontSize="20" FontAttributes="Bold" HorizontalOptions="Center" />
                <Label Text="Tap '+ Add PokÃ©mon' to build your team" FontSize="14" TextColor="{DynamicResource SubTextColor}" HorizontalOptions="Center" />
            </VerticalStackLayout>
        </Grid>
    </Grid>

</ContentPage>